<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Creative4Music Music Player</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    audio { display: block; margin: 10px 0; width: 100%; }
  </style>
</head>
<body>
  <h1>Creative4Music Music Player</h1>
  <label for="folderSelect">Choose a folder:</label>
  <select id="folderSelect">
    <option value="">-- Loading... --</option>
  </select>

  <div id="playerArea"></div>

  <script>
    const folderSelect = document.getElementById('folderSelect');
    const playerArea = document.getElementById('playerArea');

    let manifestData = {};

    fetch('manifest.json')
      .then(res => res.json())
      .then(data => {
        manifestData = data;
        folderSelect.innerHTML = '<option value="">-- Select Folder --</option>';
        for (const folder in data) {
          const option = document.createElement('option');
          option.value = folder;
          option.textContent = folder;
          folderSelect.appendChild(option);
        }
      })
      .catch(err => {
        console.error('Failed to load manifest.json:', err);
        folderSelect.innerHTML = '<option>Error loading</option>';
      });

    folderSelect.addEventListener('change', function () {
      const folder = this.value;
      playerArea.innerHTML = ''; // Clear previous tracks

      if (folder && manifestData[folder]) {
        manifestData[folder].forEach(file => {
          const audio = document.createElement('audio');
          audio.controls = true;
          audio.src = `${folder}/${file}`;
          playerArea.appendChild(audio);
        });
      }
    });
  </script>
</body>
</html>